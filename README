data flow:
      ┌─────────────────┐
      │  apd_timer_all  │
      └───────┬─────────┘
              │
              │
              ↓
      ┌─────────────────┐
      │   sample_fifo   │     (~2000 samples)
      └───────┬─────────┘
              │
              │
              ↓
    ┌──────────────────────┐
    │  sample_multiplexer  │
    └─────────┬────────────┘
              │
              │
              ↓
      ┌──────────────────┐
      │    fx2_bidir     │
      └───────┬──────────┘
              │
              │
              ↓
             HOST


data format:

Record Bit  48       40        32       24       16        8        0
Byte Bit       76543210 7654 3210 76543210 76543210 76543210 76543210
              ┌────────┬────┬────┬────────┬────────┬────────┬────────┐
              │        │    ┆    │        │        │        │        │
              └────────┴────┴────┴────────┴────────┴────────┴────────┘
                 ╷╷╷╷╷╷ ╷╷╷╷    ╷      ╷        ╷        ╷        ╷
                 ││││││ ││││    │      │        │        │        │
                 ││││││ ││││  36:32  31:24    23:16    15:8      7:0
                 ││││││ ││││╰───────────────────┬────────────────────╯
                 ││││││ ││││                Timestamp
                 ││││││ ││││
                 ││││││ │││╰─ bit 36: timer wraparound
                 ││││││ ││╰── bit 37: channel 0
                 ││││││ │╰─── bit 38: channel 1
                 ││││││ ╰──── bit 39: channel 2
                 │││││╰────── bit 40: channel 3
                 │││││
                 ││││╰─────── bit 41: sample lost
                 ││││
                 │││╰──────── bit 44: laser_en 0
                 ││╰───────── bit 45: laser_en 1
                 │╰────────── bit 46: laser_en 2
                 ╰─────────── bit 47: laser_en 3

Bit 0 of timestamp is least-significant bit

  bits 35:0	timer
  bit  36	timer wraparound
  bits 40:37	channels
  bit  41	sample lost
  bits 47-44	laser_en status


command format:
  byte 0	Data Length = N
  byte 1	Unit mask
  bytes 2:N	Data


timetag unit masks:
  0x00: apd_timer
    Byte 0:
      bit 0	Start detector
      bit 1  	Stop detector
      bit 2  	Reset counter
  
  0x01: pulse sequencer enable
    Byte 0:
      bit 0	Start
      bit 1  	Stop
  
  0x02	pulse sequencer 0 configure
  0x04	pulse sequencer 1 configure
  0x08	pulse sequencer 2 configure
  0x10	pulse_sequencer 3 configure
    Byte 0	Configuration option
      0x0	Initial state
      0x1	Initial count
      0x2	High count
      0x4	Low count
  
    Bytes 1:4   Value

